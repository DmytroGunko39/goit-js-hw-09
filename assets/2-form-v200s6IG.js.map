{"version":3,"file":"2-form-v200s6IG.js","sources":["../../src/js/2-form.js"],"sourcesContent":["const refs = {\n  feedbackForm: document.querySelector('.feedback-form'),\n};\n\nlet formData = {\n  email: '',\n  message: '',\n};\n\n//------Reading the data from the LS and creating the object\nconst fillFieldsForm = feedbackForm => {\n  try {\n    const formDataFromLS = JSON.parse(\n      localStorage.getItem('feedback-form-state')\n    );\n\n    if (formDataFromLS === null) {\n      return;\n    }\n\n    formData.email = formDataFromLS.email || '';\n    formData.message = formDataFromLS.message || '';\n\n    //------Object keys = form.elements.value;\n    Object.keys(formDataFromLS).forEach(\n      key => (feedbackForm.elements[key].value = formDataFromLS[key])\n    );\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nfillFieldsForm(refs.feedbackForm);\n\n//------Saving the data to the LS\nconst onFormChange = ({ target: formErea }) => {\n  try {\n    const fieldName = formErea.name;\n    const fieldValue = formErea.value.trim();\n\n    //------ Avoiding saving empty values\n    if (fieldValue === '') {\n      delete formData[fieldName];\n    } else {\n      formData[fieldName] = fieldValue;\n    }\n\n    localStorage.setItem('feedback-form-state', JSON.stringify(formData));\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n//------Submit the data; Cleaned LS and form;\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n\n  localStorage.removeItem('feedback-form-state');\n  event.currentTarget.reset();\n  if (!Object.values(formData).every(value => value.trim() !== '')) {\n    alert('Fill please all fields');\n    return;\n  }\n  console.log(formData);\n};\n\nrefs.feedbackForm.addEventListener('input', onFormChange);\nrefs.feedbackForm.addEventListener('submit', onFormSubmit);\n"],"names":["refs","formData","fillFieldsForm","feedbackForm","formDataFromLS","key","err","onFormChange","formErea","fieldName","fieldValue","onFormSubmit","event","value"],"mappings":"AAAA,MAAMA,EAAO,CACX,aAAc,SAAS,cAAc,gBAAgB,CACvD,EAEA,IAAIC,EAAW,CACb,MAAO,GACP,QAAS,EACX,EAGA,MAAMC,EAAiBC,GAAgB,CACrC,GAAI,CACF,MAAMC,EAAiB,KAAK,MAC1B,aAAa,QAAQ,qBAAqB,CAChD,EAEI,GAAIA,IAAmB,KACrB,OAGFH,EAAS,MAAQG,EAAe,OAAS,GACzCH,EAAS,QAAUG,EAAe,SAAW,GAG7C,OAAO,KAAKA,CAAc,EAAE,QAC1BC,GAAQF,EAAa,SAASE,CAAG,EAAE,MAAQD,EAAeC,CAAG,CACnE,CACG,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEAJ,EAAeF,EAAK,YAAY,EAGhC,MAAMO,EAAe,CAAC,CAAE,OAAQC,KAAe,CAC7C,GAAI,CACF,MAAMC,EAAYD,EAAS,KACrBE,EAAaF,EAAS,MAAM,KAAI,EAGlCE,IAAe,GACjB,OAAOT,EAASQ,CAAS,EAEzBR,EAASQ,CAAS,EAAIC,EAGxB,aAAa,QAAQ,sBAAuB,KAAK,UAAUT,CAAQ,CAAC,CACrE,OAAQK,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAIMK,EAAeC,GAAS,CAK5B,GAJAA,EAAM,eAAc,EAEpB,aAAa,WAAW,qBAAqB,EAC7CA,EAAM,cAAc,QAChB,CAAC,OAAO,OAAOX,CAAQ,EAAE,MAAMY,GAASA,EAAM,SAAW,EAAE,EAAG,CAChE,MAAM,wBAAwB,EAC9B,MACD,CACD,QAAQ,IAAIZ,CAAQ,CACtB,EAEAD,EAAK,aAAa,iBAAiB,QAASO,CAAY,EACxDP,EAAK,aAAa,iBAAiB,SAAUW,CAAY"}